<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∏–Ω–∏-—Ö–æ—Å—Ç–∏–Ω–≥ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
</head>
<body>
    <!-- –¢–æ–ø –ø–∞–Ω–µ–ª—å -->
    <header class="top-header">
        <div class="container flex items-center justify-between">
            <div class="flex items-center gap-16">
                <h1 class="logo">üìä –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏</h1>
                <div class="connection-status" id="connectionStatus">
                    <span class="status-indicator" id="statusIndicator"></span>
                    <span id="statusText">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...</span>
                </div>
            </div>
            
            <nav class="main-nav flex items-center gap-16">
                <button class="btn btn--outline btn--sm" id="homeBtn">–ì–ª–∞–≤–Ω–∞—è</button>
                <button class="btn btn--outline btn--sm hidden" id="uploadBtn">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                <button class="btn btn--outline btn--sm hidden" id="profileBtn">–ü—Ä–æ—Ñ–∏–ª—å</button>
                <button class="btn btn--outline btn--sm hidden" id="adminBtn">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</button>
                <div class="user-info hidden" id="userInfo">
                    <span id="userDisplayName"></span>
                    <button class="btn btn--sm" id="logoutBtn">–í—ã–π—Ç–∏</button>
                </div>
                <button class="btn btn--primary btn--sm" id="loginBtn">–í–æ–π—Ç–∏</button>
            </nav>
        </div>
    </header>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="main-content">
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞ -->
        <div class="page hidden" id="authPage">
            <div class="container">
                <div class="auth-container">
                    <div class="card">
                        <div class="card__body">
                            <h2>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>
                            <form id="authForm">
                                <div class="form-group">
                                    <label class="form-label" for="email">Email</label>
                                    <input type="email" id="email" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="password">–ü–∞—Ä–æ–ª—å</label>
                                    <input type="password" id="password" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <button type="submit" class="btn btn--primary btn--full-width">–í–æ–π—Ç–∏</button>
                                </div>
                                <div class="form-group">
                                    <button type="button" class="btn btn--outline btn--full-width" id="registerBtn">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                                </div>
                                <div class="form-group">
                                    <button type="button" class="btn btn--secondary btn--full-width" id="googleSignInBtn">
                                        –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
        <div class="page" id="homePage">
            <div class="container">
                <div class="page-header">
                    <h2>–ö–∞—Ç–∞–ª–æ–≥ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π</h2>
                    <div class="filters">
                        <select class="form-control" id="categoryFilter">
                            <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                            <option value="business">–ë–∏–∑–Ω–µ—Å</option>
                            <option value="education">–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</option>
                            <option value="tech">–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</option>
                        </select>
                    </div>
                </div>
                
                <div class="presentations-grid" id="presentationsGrid">
                    <!-- –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
                
                <div class="loading-indicator hidden" id="loadingIndicator">
                    <div class="spinner"></div>
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π...</p>
                </div>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∑–∫–∏ -->
        <div class="page hidden" id="uploadPage">
            <div class="container">
                <div class="upload-container">
                    <div class="card">
                        <div class="card__body">
                            <h2>–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏</h2>
                            <form id="uploadForm">
                                <div class="form-group">
                                    <label class="form-label" for="presentationFile">–§–∞–π–ª –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ (PDF)</label>
                                    <input type="file" id="presentationFile" class="form-control" accept=".pdf" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="title">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                                    <input type="text" id="title" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="description">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                                    <textarea id="description" class="form-control" rows="3"></textarea>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                                    <select id="category" class="form-control" required>
                                        <option value="business">–ë–∏–∑–Ω–µ—Å</option>
                                        <option value="education">–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</option>
                                        <option value="tech">–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="isPublic" checked>
                                        –ü—É–±–ª–∏—á–Ω–∞—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è
                                    </label>
                                </div>
                                <div class="form-group">
                                    <button type="submit" class="btn btn--primary btn--full-width">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å -->
        <div class="page hidden" id="adminPage">
            <div class="container">
                <div class="admin-header">
                    <h2>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>
                    <div class="admin-tabs">
                        <button class="btn btn--outline btn--sm admin-tab active" data-tab="users">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</button>
                        <button class="btn btn--outline btn--sm admin-tab" data-tab="presentations">–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏</button>
                        <button class="btn btn--outline btn--sm admin-tab" data-tab="stats">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
                        <button class="btn btn--outline btn--sm admin-tab" data-tab="settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                    </div>
                </div>

                <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ -->
                <div class="admin-section" id="adminUsers">
                    <div class="card">
                        <div class="card__body">
                            <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h3>
                            <div class="table-container">
                                <table class="admin-table">
                                    <thead>
                                        <tr>
                                            <th>Email</th>
                                            <th>–ò–º—è</th>
                                            <th>–†–æ–ª—å</th>
                                            <th>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</th>
                                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                        </tr>
                                    </thead>
                                    <tbody id="usersTableBody">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è–º–∏ -->
                <div class="admin-section hidden" id="adminPresentations">
                    <div class="card">
                        <div class="card__body">
                            <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è–º–∏</h3>
                            <div class="table-container">
                                <table class="admin-table">
                                    <thead>
                                        <tr>
                                            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                            <th>–í–ª–∞–¥–µ–ª–µ—Ü</th>
                                            <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                            <th>–°—Ç–∞—Ç—É—Å</th>
                                            <th>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
                                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                        </tr>
                                    </thead>
                                    <tbody id="presentationsTableBody">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div class="admin-section hidden" id="adminStats">
                    <div class="stats-grid">
                        <div class="card">
                            <div class="card__body">
                                <h3>–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                                <div class="stats-item">
                                    <div class="stats-number" id="totalUsers">0</div>
                                    <div class="stats-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                                </div>
                                <div class="stats-item">
                                    <div class="stats-number" id="totalPresentations">0</div>
                                    <div class="stats-label">–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π</div>
                                </div>
                                <div class="stats-item">
                                    <div class="stats-number" id="totalViews">0</div>
                                    <div class="stats-label">–ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
                <div class="admin-section hidden" id="adminSettings">
                    <div class="card">
                        <div class="card__body">
                            <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã</h3>
                            <form id="settingsForm">
                                <div class="form-group">
                                    <label class="form-label">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–ú–ë)</label>
                                    <input type="number" class="form-control" id="maxFileSize" value="50">
                                </div>
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="allowRegistration" checked>
                                        –†–∞–∑—Ä–µ—à–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                                    </label>
                                </div>
                                <div class="form-group">
                                    <button type="submit" class="btn btn--primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ -->
        <div class="page hidden" id="presentationPage">
            <div class="container">
                <div class="presentation-header">
                    <button class="btn btn--outline btn--sm" id="backToHome">‚Üê –ù–∞–∑–∞–¥</button>
                    <h2 id="presentationTitle"></h2>
                </div>
                
                <div class="presentation-viewer">
                    <div class="pdf-controls">
                        <button class="btn btn--outline btn--sm" id="prevPage">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∞—è</button>
                        <span id="pageInfo">–°—Ç—Ä–∞–Ω–∏—Ü–∞ 1 –∏–∑ 1</span>
                        <button class="btn btn--outline btn--sm" id="nextPage">–°–ª–µ–¥—É—é—â–∞—è ‚Üí</button>
                        <button class="btn btn--outline btn--sm" id="zoomOut">-</button>
                        <button class="btn btn--outline btn--sm" id="zoomIn">+</button>
                    </div>
                    
                    <div class="pdf-container" id="pdfContainer">
                        <canvas id="pdfCanvas"></canvas>
                    </div>
                </div>
                
                <div class="presentation-info">
                    <p id="presentationDescription"></p>
                    <div class="presentation-meta">
                        <span class="status" id="presentationCategory"></span>
                        <span id="presentationAuthor"></span>
                        <span id="presentationDate"></span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–æ–ª–∏ -->
    <div class="modal hidden" id="roleModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
                <button class="close-btn" id="closeRoleModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="roleForm">
                    <div class="form-group">
                        <label class="form-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</label>
                        <p id="roleUserEmail"></p>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="newRole">–ù–æ–≤–∞—è —Ä–æ–ª—å</label>
                        <select id="newRole" class="form-control">
                            <option value="guest">–ì–æ—Å—Ç—å</option>
                            <option value="user">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</option>
                            <option value="admin">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn btn--primary">–ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å</button>
                        <button type="button" class="btn btn--outline" id="cancelRole">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="app.js"></script>
</body>
</html>